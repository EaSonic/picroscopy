<div metal:use-macro="layout['layout']" tal:define="title 'Library'">
  <div metal:fill-slot="content" tal:omit-tag="">

    <div class="row">
      <div class="small-6 columns">
        <dl class="sub-nav">
          <dt>Show:</dt>
          <dd tal:attributes="class 'active' if req.params.get('show', 'grid') == 'grid' else None">
          <a href="?show=grid">Grid</a>
          </dd>
          <dd tal:attributes="class 'active' if req.params.get('show', 'grid') == 'table' else None">
          <a href="?show=table">Table</a>
          </dd>
        </dl>
      </div>
      <div class="small-6 columns">
        <p class="right">${'No' if not camera else len(camera)} image${'s' if len(camera) != 1 else ''} stored.</p>
      </div>
    </div>

    <div class="row">
      <div class="small-12 columns">
        <table tal:condition="camera and (req.params.get('show', 'grid') == 'table')">
          <thead>
            <tr>
              <th>Thumbnail</th>
              <th>Filename</th>
              <th>Size</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="image camera">
              <td>
                <a href="${router.path_for('view', image=image)}">
                  <img width="200" src="${router.path_for('thumb', image=image)}" />
                </a>
              </td>
              <td>${image}</td>
              <td>${helpers.image_size(image)}</td>
              <td>${helpers.image_created(image)}</td>
            </tr>
          </tbody>
        </table>
        <ul class="gallery small-block-grid-2 large-block-grid-4"
            tal:condition="camera and (req.params.get('show', 'grid') == 'grid')">
          <li tal:repeat="image camera">
          <a href="${router.path_for('view', image=image)}">
            <img src="${router.path_for('thumb', image=image)}" />
            <br />
            ${image}
          </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="small-12 columns">
        <hr />
        <span>
          <a class="small button radius" href="${router.path_for('capture')}">
            <span class="glyphicon glyphicon-camera"></span><br />
            Capture <span class="hide-for-small">Image</span>
          </a>
          <a class="small button radius" href="${router.path_for('template', page='settings')}">
            <span class="glyphicon glyphicon-cog"></span><br />
            <span class="hide-for-small">Camera</span> Settings
          </a>
        </span>
        <span class="right">
          <a class="small button radius ${'disabled' if not camera else ''}" href="${router.path_for('download')}">
            <span class="glyphicon glyphicon-download"></span><br />
            Download <span class="hide-for-small">Library</span>
          </a>
          <a class="small button radius ${'disabled' if not camera else ''}" href="${router.path_for('send')}">
            <span class="glyphicon glyphicon-send"></span><br />
            Send <span class="hide-for-small">Library</span>
          </a>
          <a class="small button radius ${'disabled' if not camera else ''} confirmation" href="${router.path_for('clear')}">
            <span class="glyphicon glyphicon-trash"></span><br />
            Clear <span class="hide-for-small">Library</span>
          </a>
        </span>
      </div>
    </div>

    <!--div class="row" tal:condition="camera">
      <div class="small-12 columns">
        <div class="row collapse">
          <form id="send-form" method="POST" action="${router.path_for('send')}">
            <div class="small-10 columns">
              <input type="email" name="email" placeholder="E-mail address" />
            </div>
            <div class="small-2 columns">
              <a class="postfix small button radius" href="#" onclick="document.getElementById('send-form').submit(); return false;">Send</a>
            </div>
          </form>
        </div>
      </div>
    </div-->

  </div>
</div>
